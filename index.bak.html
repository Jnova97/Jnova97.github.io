<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <title>Vue.js proyect</title>
</head>

<body>
    <div id="app">
        <div class="card-panel" v-if="estado">
            <div class="progress">
                <div class="indeterminate">
                </div>
            </div>
        </div>
        <div class="row" v-if="estado==false">

            <div class="col l8 offset-l2">
                <div class="card-panel">
                    <ul>
                        <li v-for="item in users">
                            <img :src="item.picture.thumbnail" class="circle">
                            <br>
                            {{item.gender}}-{{item.name.first}} {{item.name.last}} - {{item.location.city}}
                            <button @click="ver_modal(item)" class="btn-floating"></button>
                        </li>
                    </ul>
                    <hr>
                </div>
            </div>


        </div>


        <div id="popup" class="modal">
            <div v-if="usuario != null">
                    <div class="modal-content">
                           <center> <img :src="usuario.picture.large" class="circle "> </center>
                        <h4>{{usuario.name.first}} {{usuario.name.last}}</h4>
                        <p>A bunch of text</p>
                    </div>
                    <div class="modal-footer">
                        <a @click="cargarmas" href="#!" class="modal-close waves-effect waves-green btn-flat">Agree</a>
                    </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>



    <script>
        new Vue({
            el: '#app',
            data: {
                estado: true,
                users: [],
                usuario:null,
                //  url:'https://www.superheroapi.com/api.php/1052603298409190/346'
                url: 'https://randomuser.me/api/?results=5'
            },
            methods: {
                async cargar() {
                    var resultado = await axios.get(this.url);
                    this.users = resultado.data.results;
                    console.log(resultado.data);
                    this.estado = false;
                },
                
                ver_modal(item) {
                    this.usuario=item;
                    var instance = M.Modal.getInstance(document.getElementById('popup'));
                    instance.open();
                },
                async cargarmas() {
                    var resultado2 = await axios.get(this.url);
                    this.users = this.users + resultado2.data.results;
                    console.log(resultado.data);
                    this.estado = false;
                }
            },
            created() {
                this.cargar();
            },
            mounted() {
                document.addEventListener('DOMContentLoaded', function () {
                    var elems = document.querySelectorAll('.modal');
                    var instances = M.Modal.init(elems);
                });
            }
        });

    </script>

</body>

</html>